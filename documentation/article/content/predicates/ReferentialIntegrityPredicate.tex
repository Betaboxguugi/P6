\subsection{ReferentialIntegrityPredicate}
ReferentialIntegrityPredicate asserts that there is referential integrity tables in a DW. This means that each row of a table with a foreign key, has a corresponding row in the table to which it is referring. Referential integrity is not always upheld during load, so a tester may want to assert this property. The ReferentialIntegrityPredicate can be instantiated like below, with an explanation of the parameters afterwards.

\insertcodefile{ReferentialIntegrityPredicate.py}{Instantiation of ReferentialIntegrityPredicate}

\begin{description}
\item [refs] a dictionary containing either pygrametl table objects (such as Dimension and Facttable), or \FW{}'s own table representation objects. The tables that hold foreign keys that refer to other tables, are used as keys, and the list of tables are the tables they refer to. If the programmer wants to run the predicate on the whole datawarehouse, it is redundant to provide this parameter, as the DWRepresentation object already holds information on all references from facttables and snowflaked dimensions and so can use that by default instead.
\item [table\_one\_to\_many] A boolean which is True by default. If it is set to True, the predicate checks if referring tables have corresponding foreign keys in the tables they refer to.
\item [dim\_one\_to\_many] A boolean which is True by default. If it is set to True, the predicate checks if referred tables have corresponding foreign keys in the tables they are referred by.

Either of the two booleans can be set to false, but not both. If both are false, it is the equivalent of having the predicate check references for no tables, and so an error will be raised instead. If the programmer wishes to check references for all tables in the datawarehouse, he can simply not provide any parameters, and let them use their default values.
\end{description}

Below in \cref{SQLReferentialIntegrityPredicate.sql} is an example of a query used in the predicate to find the rows that do not have a corresponding foriegn key in the table they refer to. Queries like this are made every time there is a one way check for references between two tables. When fetchall is called and rows are returned, all relevant information is gathered for reporting of each row. This information includes: the key name, the key's value, the table that had a reference for it and the table that did not.

\insertcodefileSQL{SQLReferentialIntegrityPredicate.sql}{SQL ReferentialIntegrityPredicate}

